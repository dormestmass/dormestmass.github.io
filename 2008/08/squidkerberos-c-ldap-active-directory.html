<!DOCTYPE html>
<html lang="en-US" class="no-js"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="profile" href="http://gmpg.org/xfn/11"><link rel="pingback" href="http://oldie.ronix.net.ua/xmlrpc.php"><!--[if lt IE 9]>
<script src="http://oldie.ronix.net.ua/wp-content/themes/twentyfifteen/js/html5.js"></script>
<![endif]--><script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script><title>A&#1091;&#1090;&#1077;&#1085;&#1090;&#1080;&#1092;&#1080;&#1082;&#1072;&#1094;&#1080;&#1103; Squid+Kerberos c LDAP &#1072;&#1074;&#1090;&#1086;&#1088;&#1080;&#1079;&#1072;&#1094;&#1080;&#1077;&#1081; &#1074; Active Directory | Dormestmass Blog</title><!-- All in One SEO Pack 2.2.7.1 by Michael Torbert of Semper Fi Web Design[502,596] --><meta name="description" itemprop="description" content="&#1057;&#1088;&#1072;&#1079;&#1091; &#1086;&#1075;&#1086;&#1074;&#1086;&#1088;&#1102;&#1089;&#1100;, &#1087;&#1086;&#1089;&#1090; &#1085;&#1077; &#1084;&#1086;&#1081;, &#1077;&#1075;&#1086; &#1087;&#1086;&#1087;&#1088;&#1086;&#1089;&#1080;&#1083;&#1072; &#1088;&#1072;&#1079;&#1084;&#1077;&#1089;&#1090;&#1080;&#1090;&#1100; &#1086;&#1076;&#1085;&#1072; &#1089;&#1082;&#1088;&#1086;&#1084;&#1085;&#1072;&#1103; &#1076;&#1077;&#1074;&#1091;&#1096;&#1082;&#1072; :). &#1054;&#1087;&#1088;&#1086;&#1073;&#1086;&#1074;&#1072;&#1074; &#1089;&#1093;&#1077;&#1084;&#1091; Squid &#1080; LDAP-&#1072;&#1091;&#1090;&#1077;&#1085;&#1090;&#1080;&#1092;&#1080;&#1082;&#1072;&#1094;&#1080;&#1103; &#1080;&#1079; Active Directory &#1086;&#1073;&#1085;&#1072;&#1088;&#1091;&#1078;&#1080;&#1083;&#1072;"><link rel="canonical" href="http://oldie.ronix.net.ua/2008/08/squidkerberos-c-ldap-active-directory.html"><!-- /all in one seo pack --><link rel="alternate" type="application/rss+xml" title="Dormestmass Blog &raquo; Feed" href="http://oldie.ronix.net.ua/feed"><link rel="alternate" type="application/rss+xml" title="Dormestmass Blog &raquo; Comments Feed" href="http://oldie.ronix.net.ua/comments/feed"><script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/oldie.ronix.net.ua\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.3"}};
!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
</script><style type="text/css">img.wp-smiley,
img.emoji {
display: inline !important;
border: none !important;
box-shadow: none !important;
height: 1em !important;
width: 1em !important;
margin: 0 .07em !important;
vertical-align: -0.1em !important;
background: none !important;
padding: 0 !important;
}</style><link rel="stylesheet" id="twentyfifteen-fonts-css" href="//fonts.googleapis.com/css?family=Noto+Sans%3A400italic%2C700italic%2C400%2C700%7CNoto+Serif%3A400italic%2C700italic%2C400%2C700%7CInconsolata%3A400%2C700&amp;subset=latin%2Clatin-ext" type="text/css" media="all"><link rel="stylesheet" id="genericons-css" href="http://oldie.ronix.net.ua/wp-content/cache/wpfc-minified/27c6967aff57a87f73a6bc2e35fb7c9e/1438157567index.css" type="text/css" media="all"><link rel="stylesheet" id="twentyfifteen-style-css" href="http://oldie.ronix.net.ua/wp-content/cache/wpfc-minified/2180be3e3640c6e3c93e3c3547e40122/1438157568index.css" type="text/css" media="all"><!--[if lt IE 9]>
<link rel='stylesheet' id='twentyfifteen-ie-css'  href='http://oldie.ronix.net.ua/wp-content/cache/wpfc-minified/4eec9873bca83da35aaedc3d4ca8f93f/1438157568index.css' type='text/css' media='all' />
<![endif]--><!--[if lt IE 8]>
<link rel='stylesheet' id='twentyfifteen-ie7-css'  href='http://oldie.ronix.net.ua/wp-content/cache/wpfc-minified/a794d9cf5e17928c3cf514b9b346e209/1438157568index.css' type='text/css' media='all' />
<![endif]--><!-- This site uses the Google Analytics by Yoast plugin v5.4.4 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ --><script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');
__gaTracker('create', 'UA-6337706-2', 'auto');
__gaTracker('set', 'forceSSL', true);
__gaTracker('send','pageview');
</script><!-- / Google Analytics by Yoast --><script type="text/javascript" src="http://oldie.ronix.net.ua/wp-includes/js/jquery/jquery.js?ver=1.11.2"></script><script type="text/javascript" src="http://oldie.ronix.net.ua/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1"></script><link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://oldie.ronix.net.ua/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://oldie.ronix.net.ua/wp-includes/wlwmanifest.xml"><link rel="prev" title="&#1042;&#1080;&#1088;&#1090;&#1091;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1080; vsftpd" href="http://oldie.ronix.net.ua/2008/04/virtualnye-polzovateli-vsftpd.html"><link rel="next" title="&#1063;&#1080;&#1090;&#1072;&#1083;&#1082;&#1072; fb2 &#1076;&#1083;&#1103; linux" href="http://oldie.ronix.net.ua/2008/09/fb2-linux.html"><meta name="generator" content="WordPress 4.2.3"><link rel="shortlink" href="http://oldie.ronix.net.ua/?p=142"><style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style></head><body class="single single-post postid-142 single-format-standard">
<div id="page" class="hfeed site">
<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
<div id="sidebar" class="sidebar">
<header id="masthead" class="site-header" role="banner"><div class="site-branding">
<p class="site-title"><a href="http://oldie.ronix.net.ua/" rel="home">Dormestmass Blog</a></p>
<p class="site-description">&#1040;&#1076;&#1084;&#1080;&#1085; &mdash; &#1101;&#1090;&#1086; &#1089;&#1086;&#1089;&#1090;&#1086;&#1103;&#1085;&#1080;&#1077; &#1076;&#1091;&#1096;&#1080;</p>
<button class="secondary-toggle">Menu and widgets</button>
</div><!-- .site-branding -->
</header><!-- .site-header --><div id="secondary" class="secondary">
<div id="widget-area" class="widget-area" role="complementary">
<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="http://oldie.ronix.net.ua/">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:"></label>
<input type="submit" class="search-submit screen-reader-text" value="Search"></form></aside><aside id="recent-posts-2" class="widget widget_recent_entries"><h2 class="widget-title">Recent Posts</h2>		<ul><li>
<a href="http://oldie.ronix.net.ua/2012/12/kak-vklyuchit-avtodopolnenie-komand-v-git.html">&#1050;&#1072;&#1082; &#1074;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1100; &#1072;&#1074;&#1090;&#1086;&#1076;&#1086;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1080;&#1077; &#1082;&#1086;&#1084;&#1072;&#1085;&#1076; &#1074; git</a>
</li>
<li>
<a href="http://oldie.ronix.net.ua/2011/11/zametki-dlya-chajnikov.html">&#1047;&#1072;&#1084;&#1077;&#1090;&#1082;&#1080; &#1076;&#1083;&#1103; &#1095;&#1072;&#1081;&#1085;&#1080;&#1082;&#1086;&#1074;</a>
</li>
<li>
<a href="http://oldie.ronix.net.ua/2011/11/kak-smenit-ekran-vxoda-v-sistemu-ubuntu.html">&#1050;&#1072;&#1082; &#1089;&#1084;&#1077;&#1085;&#1080;&#1090;&#1100; &#1101;&#1082;&#1088;&#1072;&#1085; &#1074;&#1093;&#1086;&#1076;&#1072; &#1074; &#1089;&#1080;&#1089;&#1090;&#1077;&#1084;&#1091; (Ubuntu)</a>
</li>
<li>
<a href="http://oldie.ronix.net.ua/2011/11/unity-kak-dobavit-ikonku-skype-v-sistemnyj-trej.html">Unity: &#1082;&#1072;&#1082; &#1076;&#1086;&#1073;&#1072;&#1074;&#1080;&#1090;&#1100; &#1080;&#1082;&#1086;&#1085;&#1082;&#1091; Skype &#1074; &#1089;&#1080;&#1089;&#1090;&#1077;&#1084;&#1085;&#1099;&#1081; &#1090;&#1088;&#1077;&#1081;</a>
</li>
<li>
<a href="http://oldie.ronix.net.ua/2011/03/kak-pravilno-obnovit-ios-v-formate-tar-na-kommutatorax-cisco-catalyst.html">&#1050;&#1072;&#1082; &#1087;&#1088;&#1072;&#1074;&#1080;&#1083;&#1100;&#1085;&#1086; &#1086;&#1073;&#1085;&#1086;&#1074;&#1080;&#1090;&#1100; IOS &#1074; &#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1077; tar &#1085;&#1072; &#1082;&#1086;&#1084;&#1084;&#1091;&#1090;&#1072;&#1090;&#1086;&#1088;&#1072;&#1093;  Cisco Catalyst</a>
</li>
</ul></aside><aside id="archives-2" class="widget widget_archive"><h2 class="widget-title">Archives</h2>		<ul><li><a href="http://oldie.ronix.net.ua/2012/12">December 2012</a></li>
<li><a href="http://oldie.ronix.net.ua/2011/11">November 2011</a></li>
<li><a href="http://oldie.ronix.net.ua/2011/03">March 2011</a></li>
<li><a href="http://oldie.ronix.net.ua/2011/01">January 2011</a></li>
<li><a href="http://oldie.ronix.net.ua/2010/09">September 2010</a></li>
<li><a href="http://oldie.ronix.net.ua/2010/08">August 2010</a></li>
<li><a href="http://oldie.ronix.net.ua/2010/06">June 2010</a></li>
<li><a href="http://oldie.ronix.net.ua/2010/05">May 2010</a></li>
<li><a href="http://oldie.ronix.net.ua/2010/03">March 2010</a></li>
<li><a href="http://oldie.ronix.net.ua/2009/10">October 2009</a></li>
<li><a href="http://oldie.ronix.net.ua/2009/08">August 2009</a></li>
<li><a href="http://oldie.ronix.net.ua/2009/07">July 2009</a></li>
<li><a href="http://oldie.ronix.net.ua/2009/04">April 2009</a></li>
<li><a href="http://oldie.ronix.net.ua/2009/02">February 2009</a></li>
<li><a href="http://oldie.ronix.net.ua/2009/01">January 2009</a></li>
<li><a href="http://oldie.ronix.net.ua/2008/12">December 2008</a></li>
<li><a href="http://oldie.ronix.net.ua/2008/11">November 2008</a></li>
<li><a href="http://oldie.ronix.net.ua/2008/10">October 2008</a></li>
<li><a href="http://oldie.ronix.net.ua/2008/09">September 2008</a></li>
<li><a href="http://oldie.ronix.net.ua/2008/08">August 2008</a></li>
<li><a href="http://oldie.ronix.net.ua/2008/04">April 2008</a></li>
<li><a href="http://oldie.ronix.net.ua/2008/03">March 2008</a></li>
<li><a href="http://oldie.ronix.net.ua/2008/02">February 2008</a></li>
<li><a href="http://oldie.ronix.net.ua/2008/01">January 2008</a></li>
<li><a href="http://oldie.ronix.net.ua/2007/12">December 2007</a></li>
<li><a href="http://oldie.ronix.net.ua/2007/11">November 2007</a></li>
<li><a href="http://oldie.ronix.net.ua/2007/10">October 2007</a></li>
<li><a href="http://oldie.ronix.net.ua/2007/09">September 2007</a></li>
<li><a href="http://oldie.ronix.net.ua/2007/08">August 2007</a></li>
<li><a href="http://oldie.ronix.net.ua/2007/07">July 2007</a></li>
<li><a href="http://oldie.ronix.net.ua/2007/06">June 2007</a></li>
<li><a href="http://oldie.ronix.net.ua/2007/05">May 2007</a></li>
<li><a href="http://oldie.ronix.net.ua/2007/04">April 2007</a></li>
<li><a href="http://oldie.ronix.net.ua/2007/01">January 2007</a></li>
<li><a href="http://oldie.ronix.net.ua/2006/11">November 2006</a></li>
<li><a href="http://oldie.ronix.net.ua/2006/10">October 2006</a></li>
<li><a href="http://oldie.ronix.net.ua/2006/09">September 2006</a></li>
<li><a href="http://oldie.ronix.net.ua/2006/08">August 2006</a></li>
<li><a href="http://oldie.ronix.net.ua/2006/07">July 2006</a></li>
</ul></aside><aside id="categories-2" class="widget widget_categories"><h2 class="widget-title">Categories</h2>		<ul><li class="cat-item cat-item-2"><a href="http://oldie.ronix.net.ua/category/unix">*NIX-like OS</a>
</li>
<li class="cat-item cat-item-1"><a href="http://oldie.ronix.net.ua/category/uncategorized">Uncategorized</a>
</li>
<li class="cat-item cat-item-3"><a href="http://oldie.ronix.net.ua/category/security">&#1041;&#1077;&#1079;&#1086;&#1087;&#1072;&#1089;&#1085;&#1086;&#1089;&#1090;&#1100;</a>
</li>
<li class="cat-item cat-item-4"><a href="http://oldie.ronix.net.ua/category/desktop">&#1044;&#1077;&#1089;&#1082;&#1090;&#1086;&#1087;</a>
</li>
<li class="cat-item cat-item-5"><a href="http://oldie.ronix.net.ua/category/prochee">&#1055;&#1088;&#1086;&#1095;&#1077;&#1077;</a>
</li>
<li class="cat-item cat-item-6"><a href="http://oldie.ronix.net.ua/category/networks">&#1057;&#1077;&#1090;&#1080;</a>
</li>
</ul></aside><aside id="meta-2" class="widget widget_meta"><h2 class="widget-title">Meta</h2>			<ul><li><a href="http://oldie.ronix.net.ua/wp-login.php">Log in</a></li>
<li><a href="http://oldie.ronix.net.ua/feed">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="http://oldie.ronix.net.ua/comments/feed">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul></aside></div><!-- .widget-area -->
</div><!-- .secondary -->
</div><!-- .sidebar -->
<div id="content" class="site-content">
<div id="primary" class="content-area">
<main id="main" class="site-main" role="main"><article id="post-142" class="post-142 post type-post status-publish format-standard hentry category-uncategorized"><header class="entry-header"><h1 class="entry-title">A&#1091;&#1090;&#1077;&#1085;&#1090;&#1080;&#1092;&#1080;&#1082;&#1072;&#1094;&#1080;&#1103; Squid+Kerberos c LDAP &#1072;&#1074;&#1090;&#1086;&#1088;&#1080;&#1079;&#1072;&#1094;&#1080;&#1077;&#1081; &#1074; Active Directory</h1>	</header><!-- .entry-header --><div class="entry-content">
<p><!-- google_ad_section_start --><br>
&#1057;&#1088;&#1072;&#1079;&#1091; &#1086;&#1075;&#1086;&#1074;&#1086;&#1088;&#1102;&#1089;&#1100;, &#1087;&#1086;&#1089;&#1090; &#1085;&#1077; &#1084;&#1086;&#1081;, &#1077;&#1075;&#1086; &#1087;&#1086;&#1087;&#1088;&#1086;&#1089;&#1080;&#1083;&#1072; &#1088;&#1072;&#1079;&#1084;&#1077;&#1089;&#1090;&#1080;&#1090;&#1100; &#1086;&#1076;&#1085;&#1072; &#1089;&#1082;&#1088;&#1086;&#1084;&#1085;&#1072;&#1103; &#1076;&#1077;&#1074;&#1091;&#1096;&#1082;&#1072; :).</p>
<hr><p>&#1054;&#1087;&#1088;&#1086;&#1073;&#1086;&#1074;&#1072;&#1074; &#1089;&#1093;&#1077;&#1084;&#1091; <a href="http://oldie.ronix.net.ua/2006/10/squid-ldap-active-directory.html">Squid &#1080; LDAP-&#1072;&#1091;&#1090;&#1077;&#1085;&#1090;&#1080;&#1092;&#1080;&#1082;&#1072;&#1094;&#1080;&#1103; &#1080;&#1079; Active Directory</a> &#1086;&#1073;&#1085;&#1072;&#1088;&#1091;&#1078;&#1080;&#1083;&#1072; &#1085;&#1077;&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077; &#1085;&#1077;&#1091;&#1076;&#1086;&#1073;&#1089;&#1090;&#1074;&#1072;. (&#1089;&#1084;. &#1082;&#1086;&#1084;&#1084;&#1077;&#1085;&#1090;&#1072;&#1088;&#1080;&#1080; &#1086;&#1090; &#1040;nna)</p>
<p>&#1042;&#1072;&#1088;&#1080;&#1072;&#1085;&#1090; &#1089; NTLM &#1084;&#1085;&#1077; &#1085;&#1077; &#1087;&#1086;&#1076;&#1093;&#1086;&#1076;&#1080;&#1090; &#1090;.&#1082;. &#1076;&#1083;&#1103; &#1085;&#1077;&#1075;&#1086; &#1085;&#1091;&#1078;&#1085;&#1086; &#1095;&#1083;&#1077;&#1085;&#1089;&#1090;&#1074;&#1086; &#1074; &#1076;&#1086;&#1084;&#1077;&#1085;&#1077; &#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; Samba, &#1095;&#1090;&#1086; &#1084;&#1077;&#1085;&#1103; &#1085;&#1077; &#1091;&#1089;&#1090;&#1088;&#1072;&#1080;&#1074;&#1072;&#1077;&#1090;.</p>
<p>&#1058;.&#1086;. &#1087;&#1088;&#1080;&#1093;&#1086;&#1076;&#1080;&#1084; &#1082; &#1080;&#1076;&#1077;&#1077; &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1103;&#1090;&#1100; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103; &#1095;&#1077;&#1088;&#1077;&#1079; Kerberos.</p>
<p>&#1055;&#1088;&#1077;&#1080;&#1084;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1086; &#1074; &#1090;&#1086;&#1084;, &#1095;&#1090;&#1086; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1100; &#1076;&#1072;&#1078;&#1077; &#1085;&#1077; &#1079;&#1085;&#1072;&#1077;&#1090; &#1095;&#1090;&#1086; &#1077;&#1075;&#1086; credentials &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1103;&#1102;&#1090;, &#1077;&#1084;&#1091; &#1085;&#1077; &#1085;&#1091;&#1078;&#1085;&#1086; &#1074;&#1074;&#1086;&#1076;&#1080;&#1090;&#1100; &#1083;&#1086;&#1075;&#1080;&#1085; &#1087;&#1072;&#1088;&#1086;&#1083;&#1100;. &#1042;&#1089;&#1077; &#1073;&#1077;&#1088;&#1077;&#1090;&#1089;&#1103; &#1080;&#1079; &#1077;&#1075;&#1086; &#1090;&#1077;&#1082;&#1091;&#1097;&#1077;&#1081; Windows &#1089;&#1077;&#1089;&#1089;&#1080;&#1080;.</p>
<p>&#1045;&#1089;&#1083;&#1080; &#1077;&#1089;&#1090;&#1100; &#1078;&#1077;&#1083;&#1072;&#1085;&#1080;&#1077; &#1087;&#1086;&#1076;&#1082;&#1086;&#1074;&#1072;&#1090;&#1100;&#1089;&#1103; &#1074; &#1090;&#1077;&#1086;&#1088;&#1080;&#1080;, &#1090;&#1086; &#1095;&#1080;&#1090;&#1072;&#1077;&#1084; &#1074;&#1086;&#1090; &#1101;&#1090;&#1086;<br><noindex><noindex><a rel="nofollow" class="moz-txt-link-freetext" href="http://technet.microsoft.com/ru-ru/library/bb742431%28en-us,printer%29.aspx">http://technet.microsoft.com/ru-ru/library/bb742431(en-us,printer).aspx</a></noindex></noindex>.</p>
<p><span id="more-142"></span>&#1044;&#1086; &#1084;&#1072;&#1085;&#1080;&#1087;&#1091;&#1083;&#1103;&#1094;&#1080;&#1081; &#1088;&#1072;&#1073;&#1086;&#1095;&#1072;&#1103; &#1084;&#1072;&#1096;&#1080;&#1085;&#1072; &#1091; &#1084;&#1077;&#1085;&#1103;:</p>
<p style="padding-left: 30px;">Debian Etch 2.6.5-6etch1<br>
Squid Cache: Version 2.6.STABLE5<br>
&#1074; &#1089;&#1090;&#1072;&#1073;&#1080;&#1083;&#1100;&#1085;&#1086;&#1081; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080; &mdash;<br>
libkrb53 1.4.4-7etch5<br>
krb5-user 1.4.4-7etch4<br>
ldap &#1089;&#1077;&#1088;&#1074;&#1077;&#1088; &#1085;&#1077; &#1085;&#1091;&#1078;&#1077;&#1085;.</p>
<p>&#1044;&#1083;&#1103; &#1072;&#1091;&#1090;&#1077;&#1085;&#1090;&#1080;&#1092;&#1080;&#1082;&#1072;&#1094;&#1080;&#1080; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103; &#1074; Kerberos &#1085;&#1077;&#1086;&#1073;&#1093;&#1086;&#1076;&#1080;&#1084;&#1072; &#1089;&#1093;&#1077;&#1084;&#1072; auth_param negotiate &#1089; &#1093;&#1077;&#1083;&#1087;&#1077;&#1088;&#1086;&#1084; squid_auth_kerb.</p>
<p>&#1042; &#1089;&#1090;&#1072;&#1085;&#1076;&#1072;&#1088;&#1090;&#1085;&#1086;&#1081; &#1089;&#1073;&#1086;&#1088;&#1082;&#1077; &#1089;&#1082;&#1074;&#1080;&#1076;&#1072; &#1101;&#1090;&#1086;&#1081; &#1089;&#1093;&#1077;&#1084;&#1099; &#1085;&#1077;&#1090; (&#1089;&#1084;. squid -v).<br>
&#1044;&#1072;&#1085;&#1085;&#1072;&#1103; &#1089;&#1093;&#1077;&#1084;&#1072; &#1087;&#1086;&#1103;&#1074;&#1080;&#1083;&#1072;&#1089;&#1100; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1085;&#1072;&#1095;&#1080;&#1085;&#1072;&#1103; &#1089; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080; &#1089;&#1082;&#1074;&#1080;&#1076;&#1072; 2.6.14</p>
<p>&#1057;&#1091;&#1076;&#1103; &#1087;&#1086; &#1089;&#1087;&#1080;&#1089;&#1082;&#1091; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074; squid3 <noindex><noindex><a rel="nofollow" href="http://packages.debian.org/etch/i386/squid3/filelist">&#1076;&#1083;&#1103; &#1076;&#1077;&#1073;&#1080;&#1072;&#1085;&#1072;</a></noindex></noindex>, &#1089;&#1093;&#1077;&#1084;&#1099; negotiate &#1079;&#1076;&#1077;&#1089;&#1100; &#1090;&#1086;&#1078;&#1077; &#1085;&#1077;&#1090;.</p>
<p>&#1055;&#1086;&#1101;&#1090;&#1086;&#1084;&#1091; &mdash; &#1089;&#1084;&#1086;&#1090;&#1088;&#1080;&#1084; &#1085;&#1072; source &#1092;&#1072;&#1081;&#1083;&#1099; &#1076;&#1083;&#1103; &#1089;&#1083;&#1077;&#1076;&#1091;&#1102;&#1097;&#1077;&#1081; &#1089;&#1073;&#1086;&#1088;&#1082;&#1080; Debian &mdash; Lenny, &#1075;&#1076;&#1077; &#1074; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080; 2.7 &#1082;&#1077;&#1088;&#1073;&#1077;&#1088;&#1086;&#1089; &#1091;&#1078;&#1077; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103;, &#1072; &#1089;&#1072;&#1084; &#1089;&#1082;&#1074;&#1080;&#1076; &#1091;&#1078;&#1077; &#1074; &#1089;&#1090;&#1072;&#1076;&#1080;&#1080; Stable. Lenny &#1086;&#1073;&#1077;&#1097;&#1072;&#1102;&#1090; &#1074; &#1089;&#1077;&#1085;&#1090;&#1103;&#1073;&#1088;&#1077;, &#1076;&#1091;&#1084;&#1072;&#1102; &#1090;&#1072;&#1084; &#1091;&#1078;&#1077; &#1085;&#1077; &#1087;&#1088;&#1080;&#1076;&#1077;&#1090;&#1089;&#1103; &#1095;&#1090;&#1086; &#1090;&#1086; &#1087;&#1086;&#1076;&#1082;&#1088;&#1091;&#1095;&#1080;&#1074;&#1072;&#1090;&#1100;.</p>
<p><em>&#1052;&#1072;&#1083;&#1077;&#1085;&#1100;&#1082;&#1086;&#1077; &#1086;&#1090;&#1089;&#1090;&#1091;&#1087;&#1083;&#1077;&#1085;&#1080;&#1077; &mdash; &#1090;&#1077;&#1089;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1083;&#1086;&#1089;&#1100; &#1074;&#1089;&#1077; &#1085;&#1072; &#1074;&#1080;&#1088;&#1090;&#1091;&#1072;&#1083;&#1100;&#1085;&#1086;&#1081; &#1084;&#1072;&#1096;&#1080;&#1085;&#1077; &#1089; Ubuntu Server 8.04, &#1090;.&#1082;. &#1086;&#1085;&#1072; &#1086;&#1089;&#1085;&#1086;&#1074;&#1072;&#1085;&#1072; &#1085;&#1072; debian packages &#1080; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080; &#1085;&#1091;&#1078;&#1085;&#1099;&#1093; &#1087;&#1072;&#1082;&#1077;&#1090;&#1086;&#1074; &#1074; &#1085;&#1077;&#1081; &#1074;&#1099;&#1096;&#1077; &#1095;&#1077;&#1084; &#1074; Etch. &#1050;&#1072;&#1082; &#1089;&#1076;&#1077;&#1083;&#1072;&#1090;&#1100; &#1101;&#1090;&#1086; &#1085;&#1072; Etch Debian &#1088;&#1072;&#1089;&#1089;&#1082;&#1072;&#1078;&#1091; &#1085;&#1080;&#1078;&#1077;.</em></p>
<p>&#1042;&#1077;&#1088;&#1089;&#1080;&#1080; &#1087;&#1072;&#1082;&#1077;&#1090;&#1086;&#1074; &#1085;&#1072; &#1091;&#1073;&#1091;&#1085;&#1090;&#1091;:</p>
<p style="padding-left: 30px;">
krb5-config &mdash; 1.17<br>
krb5-user &mdash; 1.6.dfsg.3~beta1-2ubuntu1<br>
libkrb5-dev &mdash; 1.6.dfsg.3~beta1-2ubuntu1<br>
libkrb53 &mdash; 1.6.dfsg.3~beta1-2ubuntu1<br>
squid &mdash; 2.6.18</p>
<p><strong>1. &#1057;&#1073;&#1086;&#1088;&#1082;&#1072; &#1089;&#1082;&#1074;&#1080;&#1076;&#1072; &#1089; &#1085;&#1077;&#1086;&#1073;&#1093;&#1086;&#1076;&#1080;&#1084;&#1099;&#1084;&#1080; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1072;&#1084;&#1080;</strong></p>
<p><em>&#1054;&#1090;&#1089;&#1090;&#1091;&#1087;&#1083;&#1077;&#1085;&#1080;&#1077;: &#1087;&#1086; &#1085;&#1072;&#1095;&#1072;&#1083;&#1091; &#1103; &#1087;&#1088;&#1086;&#1073;&#1086;&#1074;&#1072;&#1083;&#1072; &#1089;&#1086;&#1073;&#1088;&#1072;&#1090;&#1100; &#1087;&#1072;&#1082;&#1077;&#1090;&#1099; &#1080;&#1079; src &#1076;&#1083;&#1103; &#1090;&#1077;&#1082;&#1091;&#1097;&#1077;&#1081; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080; 2.6.18, &#1085;&#1086; &#1090;&#1072;&#1084; &#1085;&#1091;&#1078;&#1085;&#1086; &#1073;&#1099;&#1083;&#1086; &#1087;&#1088;&#1072;&#1074;&#1080;&#1090;&#1100; &#1092;&#1072;&#1081;&#1083; rules, &#1087;&#1086;&#1090;&#1086;&#1084;&#1091; &#1095;&#1090;&#1086; &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; &#1085;&#1077; &#1089;&#1086;&#1073;&#1080;&#1088;&#1072;&#1083;&#1072;&#1089;&#1100; &#1089;&#1093;&#1077;&#1084;&#1072; negotiate, &#1080; &#1076;&#1077;&#1083;&#1072;&#1090;&#1100; &#1082;&#1072;&#1082;&#1080;&#1077; &#1090;&#1086; &#1088;&#1091;&#1095;&#1085;&#1099;&#1077; &#1082;&#1086;&#1084;&#1087;&#1080;&#1083;&#1103;&#1094;&#1080;&#1080;. </em></p>
<p><noindex><noindex><a rel="nofollow" href="http://packages.debian.org/source/lenny/squid">&#1057;&#1082;&#1072;&#1095;&#1080;&#1074;&#1072;&#1077;&#1084;</a></noindex></noindex> &#1080; &#1088;&#1072;&#1089;&#1087;&#1072;&#1082;&#1086;&#1074;&#1099;&#1074;&#1072;&#1077;&#1084; source (3 &#1092;&#1072;&#1081;&#1083;&#1072; &#1076;&#1086;&#1083;&#1078;&#1085;&#1099; &#1083;&#1077;&#1078;&#1072;&#1090;&#1100; &#1074; &#1086;&#1076;&#1085;&#1086;&#1081; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1080;) &#1080;&#1079; lenny &#1088;&#1077;&#1087;&#1086;&#1079;&#1080;&#1090;&#1072;&#1088;&#1080;&#1103;.</p>
<pre><span><span style="color: #009900;">dpkg-source -x squid_2.7.STABLE3-1.dsc</span></span>
</pre>
<p>&#1042; &#1092;&#1072;&#1081;&#1083;&#1077; <span style="color: #990000;">debian/rules</span> &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; dpkg &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090; &#1076;&#1083;&#1103; &#1089;&#1073;&#1086;&#1088;&#1082;&#1080; &#1087;&#1072;&#1082;&#1077;&#1090;&#1072;, &#1074;&#1080;&#1076;&#1085;&#1086;, &#1095;&#1090;&#1086; &#1089;&#1086;&#1073;&#1080;&#1088;&#1072;&#1090;&#1100;&#1089;&#1103; &#1089;&#1082;&#1074;&#1080;&#1076; &#1073;&#1091;&#1076;&#1077;&#1090; &#1089; &#1085;&#1091;&#1078;&#1085;&#1099;&#1084;&#1080; &#1085;&#1072;&#1084; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1072;&#1084;&#1080;, &#1072; &#1080;&#1084;&#1077;&#1085;&#1085;&#1086;</p>
<pre> --enable-auth="basic,digest,ntlm,negotiate" 
--enable-negotiate-auth-helpers=squid_kerb_auth 
--enable-external-acl-helpers="ldap_group" 
</pre>
<p>&#1055;&#1086;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1091; digest,ntlm &#1085;&#1077; &#1085;&#1091;&#1078;&#1085;&#1099; &mdash; &#1080;&#1093; &#1084;&#1086;&#1078;&#1085;&#1086; &#1085;&#1077; &#1089;&#1086;&#1073;&#1080;&#1088;&#1072;&#1090;&#1100;. &#1045;&#1089;&#1090;&#1077;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;, &#1074; &#1089;&#1080;&#1089;&#1090;&#1077;&#1084;&#1077; &#1076;&#1086;&#1083;&#1078;&#1085;&#1099; &#1073;&#1099;&#1090;&#1100; &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1083;&#1077;&#1085;&#1099; &#1074;&#1089;&#1077; &#1087;&#1072;&#1082;&#1077;&#1090;&#1099; &#1085;&#1077;&#1086;&#1073;&#1093;&#1086;&#1076;&#1080;&#1084;&#1099; &#1076;&#1083;&#1103; &#1089;&#1073;&#1086;&#1088;&#1082;&#1080; .deb &#1080;&#1079; src. (<span style="color: #cc6600;">dpkg-dev, debconf-utils, </span><span style="color: #cc6600;">dpatch, </span><span style="color: #cc6600;">build-essential, libdb-dev, </span><span style="color: #cc6600;">libgss-dev, libgss0, </span><span style="color: #cc6600;">libldap2-dev, libpam0g-dev, sharutils, po-debconf, libkrb5-dev, libgssglue-dev</span>, &#1080; &#1087;&#1088;.)</p>
<p>&#1053;&#1072; &#1089;&#1072;&#1084;&#1086;&#1084; &#1076;&#1077;&#1083;&#1077;, &#1087;&#1088;&#1080; &#1087;&#1086;&#1087;&#1099;&#1090;&#1082;&#1077; &#1089;&#1086;&#1073;&#1088;&#1072;&#1090;&#1100; &#1082;&#1086;&#1084;&#1072;&#1085;&#1076;&#1086;&#1081; <span style="color: #009900;">dpkg-buildpackage-rfakeroot -b</span> (&#1077;&#1089;&#1083;&#1080; &#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1089;&#1086;&#1073;&#1088;&#1072;&#1090;&#1100; &#1087;&#1072;&#1082;&#1077;&#1090; &#1085;&#1077; &#1073;&#1091;&#1076;&#1091;&#1095;&#1080; &#1088;&#1091;&#1090;&#1086;&#1084;, &#1101;&#1090;&#1086; &#1084;&#1086;&#1078;&#1085;&#1086; &#1089;&#1076;&#1077;&#1083;&#1072;&#1090;&#1100; &#1089; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084; -rfakeroot.</p>
<p>&#1055;&#1072;&#1082;&#1077;&#1090; fakeroot &#1076;&#1086;&#1083;&#1078;&#1077;&#1085; &#1073;&#1099;&#1090;&#1100; &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1083;&#1077;&#1085;) &#1089;&#1080;&#1089;&#1090;&#1077;&#1084;&#1072; &#1089;&#1082;&#1072;&#1078;&#1077;&#1090; &#1082;&#1072;&#1082;&#1080;&#1093; &#1087;&#1072;&#1082;&#1077;&#1090;&#1086;&#1074; &#1077;&#1081; &#1085;&#1077; &#1093;&#1074;&#1072;&#1090;&#1072;&#1077;&#1090; &#1076;&#1083;&#1103; &#1089;&#1073;&#1086;&#1088;&#1082;&#1080;, &#1087;&#1086;&#1101;&#1090;&#1086;&#1084;&#1091; &#1079;&#1072;&#1088;&#1072;&#1085;&#1077;&#1077; &#1089;&#1090;&#1072;&#1074;&#1080;&#1090;&#1100; &#1074;&#1089;&#1077; &#1087;&#1086;&#1076;&#1088;&#1103;&#1076; &#1085;&#1077; &#1086;&#1073;&#1103;&#1079;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;.</p>
<p>&#1045;&#1089;&#1083;&#1080; &#1091; &#1074;&#1072;&#1089; &#1095;&#1090;&#1086; &#1090;&#1086; &#1085;&#1077; &#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1089;&#1103; &#1089; &#1090;&#1072;&#1082;&#1080;&#1084; &#1089;&#1087;&#1086;&#1089;&#1086;&#1073;&#1086;&#1084; &#1089;&#1073;&#1086;&#1088;&#1082;&#1080;, &#1090;&#1086; <noindex><noindex><a rel="nofollow" href="http://www.debian.org/doc/FAQ/ch-pkg_basics.ru.html">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081; &#1084;&#1072;&#1085;&#1091;&#1072;&#1083; &#1087;&#1086; &#1076;&#1077;&#1073;&#1080;&#1072;&#1085;&#1091;</a></noindex></noindex> &#1075;&#1086;&#1074;&#1086;&#1088;&#1080;&#1090; &#1095;&#1090;&#1086; &#1084;&#1086;&#1078;&#1085;&#1086; &#1089;&#1086;&#1073;&#1080;&#1088;&#1072;&#1090;&#1100; &#1095;&#1077;&#1088;&#1077;&#1079;</p>
<pre><span style="color: #009900;">debian/rules build</span>
<span style="color: #009900;">debian/rules binary</span>
</pre>
<p>&#1055;&#1086;&#1089;&#1083;&#1077; &#1089;&#1073;&#1086;&#1088;&#1082;&#1080; &#1087;&#1072;&#1082;&#1077;&#1090;&#1072; &#1080;&#1084;&#1077;&#1077;&#1084; 3 &#1092;&#1072;&#1081;&#1083;&#1072;</p>
<pre><span style="color: #cc6600;">squid_2.7.STABLE3-1_i386.deb</span>
<span style="color: #cc6600;">squid-common_2.7.STABLE3-1_all.deb</span>
<span style="color: #cc6600;">squid-cgi_2.7.STABLE3-1_i386.deb</span>
</pre>
<p>&#1057;&#1090;&#1072;&#1074;&#1080;&#1084; squid-common &#1080; squid.</p>
<p>&#1058;&#1077;&#1087;&#1077;&#1088;&#1100; &#1085;&#1072;&#1076;&#1086; &#1089;&#1086;&#1073;&#1088;&#1072;&#1090;&#1100; &#1093;&#1077;&#1083;&#1087;&#1077;&#1088;. &#1044;&#1077;&#1083;&#1086; &#1074; &#1090;&#1086;&#1084;, &#1095;&#1090;&#1086; &#1074; &#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1080;&#1082;&#1072;&#1093; &#1076;&#1077;&#1073;&#1080;&#1072;&#1085;&#1072; &#1087;&#1088;&#1077;&#1076;&#1091;&#1089;&#1084;&#1086;&#1090;&#1088;&#1077;&#1085;&#1072; &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;&#1089;&#1090;&#1100; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103; &#1082;&#1072;&#1082; MIT kerberos &#1090;&#1072;&#1082; &#1080; Heimdal, &#1087;&#1086;&#1101;&#1090;&#1086;&#1084;&#1091; &#1089;&#1072;&#1084; &#1093;&#1077;&#1083;&#1087;&#1077;&#1088; &#1089;&#1086;&#1073;&#1088;&#1072;&#1083;&#1089;&#1103; &#1087;&#1086;&#1076; &#1085;&#1077;&#1095;&#1090;&#1086; &#1085;&#1077;&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1085;&#1086;&#1077;(&#1073;&#1077;&#1079; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1082;&#1080; SPNEGO), &#1080; &#1087;&#1088;&#1080; &#1090;&#1077;&#1089;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1080; &#1087;&#1086;&#1083;&#1085;&#1086;&#1089;&#1090;&#1100;&#1102; &#1089;&#1082;&#1086;&#1085;&#1092;&#1080;&#1075;&#1091;&#1088;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1085;&#1099;&#1093;(&#1087;&#1087; 1-4) squid+kerb &#1076;&#1072;&#1074;&#1072;&#1083; &#1086;&#1096;&#1080;&#1073;&#1082;&#1091;.</p>
<pre><span><span style="color: #999999;">2008/08/04 18:33:48| squid_kerb_auth: parseNegTokenInit failed with rc=101</span></span>
<span><span style="color: #999999;">2008/08/04 18:33:48| squid_kerb_auth: received type 1 NTLM token</span></span>
<span><span style="color: #999999;">(squid_kerb_auth): ../../../../src/lib/gssapi/generic/util_validate.c:162: g_validate:Assertion `(&amp;(&amp;_m-&gt;os)-&gt;n)-&gt;initialized ==
K5_MUTEX_DEBUG_INITIALIZED' failed.</span></span>
</pre>
<p>&#1055;&#1086;&#1101;&#1090;&#1086;&#1084;&#1091; &#1074; &#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1080;&#1082;&#1072;&#1093; &#1080;&#1079; &#1092;&#1072;&#1081;&#1083;&#1072;  ./helpers/negotiate_auth/squid_kerb_auth/readme.txt &#1082;&#1086;&#1087;&#1080;&#1088;&#1091;&#1077;&#1084; &#1082;&#1091;&#1089;&#1086;&#1082;</p>
<pre><span style="color: #339999;">#!/bin/sh</span>
<span style="color: #339999;">DEFINE_SPNEGO=-DHAVE_SPNEGO</span>
<span style="color: #339999;">#MIT</span>
<span style="color: #339999;">  DEFINE="$DEFINE_SPNEGO -D__LITTLE_ENDIAN__"</span>
<span style="color: #339999;">  INCLUDE=-Ispnegohelp</span>
<span style="color: #339999;">  LIBS="-lgssapi_krb5 -lkrb5 -lcom_err"</span>
<span style="color: #339999;">#</span>
<span style="color: #339999;">SPNEGO="spnegohelp/derparse.c spnegohelp/spnego.c  spnegohelp/spnegohelp.c spnegohelp/spnegoparse.c"</span>
<span style="color: #339999;">SOURCE="squid_kerb_auth.c base64.c"</span>
<span style="color: #339999;">gcc -o squid_kerb_auth $DEFINE $INCLUDE $SOURCE $SPNEGO $LIBS</span>
</pre>
<p>&#1042; &#1092;&#1072;&#1081;&#1083; &#1080; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1077;&#1084; &#1077;&#1075;&#1086;. &#1055;&#1086;&#1083;&#1091;&#1095;&#1077;&#1085;&#1085;&#1099;&#1081; &#1087;&#1086;&#1089;&#1083;&#1077; &#1087;&#1077;&#1088;&#1077;&#1082;&#1086;&#1084;&#1087;&#1080;&#1083;&#1103;&#1094;&#1080;&#1080; &#1092;&#1072;&#1081;&#1083; <span style="color: #990000;">squid_kerb_auth</span> &#1082;&#1083;&#1072;&#1076;&#1077;&#1084; &#1074; /usr/lib/squid (&#1080;&#1083;&#1080; &#1090;&#1091; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1102; &#1082;&#1091;&#1076;&#1072; &#1074;&#1072;&#1096; &#1089;&#1082;&#1074;&#1080;&#1076; &#1089;&#1083;&#1086;&#1078;&#1080;&#1083; &#1074;&#1089;&#1077; &#1093;&#1077;&#1083;&#1087;&#1077;&#1088;&#1099;).</p>
<p><strong>2. Windows AD DC</strong></p>
<p>&#1058;&#1077;&#1087;&#1077;&#1088;&#1100; &#1085;&#1072;&#1076;&#1086; &#1089;&#1086;&#1079;&#1076;&#1072;&#1090;&#1100; &#1085;&#1072; &#1040;&#1044; &#1090;&#1080;&#1082;&#1077;&#1090;(&#1082;&#1077;&#1081;&#1090;&#1072;&#1073;) &#1076;&#1083;&#1103; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103;, &#1087;&#1086;&#1076; &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1084; &#1073;&#1091;&#1076;&#1077;&#1090; &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1103;&#1090;&#1100;&#1089;&#1103; &#1074;&#1072;&#1083;&#1080;&#1076;&#1085;&#1086;&#1089;&#1090;&#1100; win-&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103; &#1089;&#1086;&#1073;&#1088;&#1072;&#1074;&#1096;&#1077;&#1075;&#1086;&#1089;&#1103; &#1074; &#1080;&#1085;&#1090;&#1077;&#1088;&#1085;&#1077;&#1090;.</p>
<p>&#1042; &#1040;&#1044; &#1089;&#1086;&#1079;&#1076;&#1072;&#1077;&#1084; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103; &#1091; &#1082;&#1086;&#1090;&#1086;&#1088;&#1086;&#1075;&#1086; &#1073;&#1091;&#1076;&#1077;&#1090; &#1085;&#1080;&#1082;&#1086;&#1075;&#1076;&#1072; &#1085;&#1077; &#1082;&#1086;&#1085;&#1095;&#1072;&#1102;&#1097;&#1080;&#1081;&#1089;&#1103; &#1087;&#1072;&#1088;&#1086;&#1083;&#1100; &#1080; &#1085;&#1080;&#1082;&#1086;&#1075;&#1076;&#1072; &#1085;&#1077; &#1073;&#1083;&#1086;&#1082;&#1080;&#1088;&#1091;&#1102;&#1097;&#1080;&#1081;&#1089;&#1103; &#1072;&#1082;&#1082;&#1072;&#1091;&#1085;&#1090;(<span style="text-decoration: underline;">&#1085;&#1072;&#1087;&#1088;</span>. AD=mydomain.lan;user=krbldap; &#1087;&#1072;&#1088;&#1086;&#1083;&#1100;=krbldappassword; )<br>
&#1042; AD DNS &#1074;&#1085;&#1086;&#1089;&#1080;&#1084; &#1079;&#1072;&#1087;&#1080;&#1089;&#1080; &#1087;&#1088;&#1086; &#1085;&#1072;&#1096; squid &#1089;&#1077;&#1088;&#1074;&#1077;&#1088; &#1085;&#1072;&#1087;&#1088;. <span style="color: #990000;">vm-ubuntu.mydomain.lan</span>(A) &amp; (PTR)  (&#1077;&#1089;&#1083;&#1080; &#1091; &#1074;&#1072;&#1089; &#1089;&#1072;&#1084;&#1073;&#1072;, &#1080; &#1083;&#1080;&#1085;&#1091;&#1082;&#1089; &#1074;&#1074;&#1077;&#1076;&#1077;&#1085;(join) &#1074; &#1076;&#1086;&#1084;&#1077;&#1085;, &#1090;&#1086; &#1101;&#1090;&#1080; &#1079;&#1072;&#1087;&#1080;&#1089;&#1080; &#1090;&#1072;&#1084; &#1077;&#1089;&#1090;&#1100;)</p>
<pre>C:Program FilesSupport Tools&gt;<span style="color: #009900;">ktpass -princ <a class="__cf_email__" href="http://oldie.ronix.net.ua/cdn-cgi/l/email-protection" data-cfemail="a3ebf7f7f38cd5ce8ed6c1d6cdd7d68dcedac7cccec2cacd8dcfc2cde3eefae7eceee2eaed8defe2ed">[email&nbsp;protected]</a><script data-cfhash="f9e31" type="text/javascript">/* <![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&&(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]> */</script> -mapuser krbldap -crypto des-cbc-md5 -pass "krbldappassword" -ptype KRB5_NT_SRV_HST -out krbldap.mydomain.lan.keytab</span>
</pre>
<p>&#1042;&#1072;&#1078;&#1085;&#1086; &#1091;&#1082;&#1072;&#1079;&#1072;&#1090;&#1100; &#1087;&#1088;&#1080;&#1085;&#1094;&#1080;&#1087;&#1072;&#1083;&#1086;&#1084; &#1080;&#1084;&#1077;&#1085;&#1085;&#1086; hostname (&#1074; &#1076;&#1072;&#1085;&#1085;&#1086;&#1084; &#1087;&#1088;&#1080;&#1084;&#1077;&#1088;&#1077; &mdash; vm-ubuntu) &#1087;&#1086;&#1090;&#1086;&#1084;&#1091; &#1095;&#1090;&#1086;, &#1074; &#1089;&#1074;&#1086;&#1081;&#1089;&#1090;&#1074;&#1072;&#1093; &#1060;&#1060; &#1080; &#1048;&#1045; &#1087;&#1088;&#1086;&#1087;&#1080;&#1089;&#1099;&#1074;&#1072;&#1077;&#1084; vm-ubuntu.mydomain.lan &#1072; &#1085;&#1077; IP. &#1045;&#1089;&#1083;&#1080; &#1074;&#1089;&#1077; &#1090;&#1072;&#1082;&#1080; &#1085;&#1077;&#1086;&#1073;&#1093;&#1086;&#1076;&#1080;&#1084;&#1086; &#1091;&#1082;&#1072;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1080;&#1085;&#1086;&#1077; &#1080;&#1084;&#1103; , &#1072; &#1085;&#1077; &#1090;&#1086;, &#1095;&#1090;&#1086; &#1086;&#1090;&#1076;&#1072;&#1077;&#1090; &#1076;&#1077;&#1073;&#1080;&#1072;&#1085; &#1087;&#1086; hostname -a, &#1077;&#1075;&#1086; &#1085;&#1091;&#1078;&#1085;&#1086; &#1091;&#1082;&#1072;&#1079;&#1072;&#1090;&#1100; &#1089;&#1082;&#1074;&#1080;&#1076;&#1091; &#1074; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1077; <em>visible_hostname </em>conf &#1092;&#1072;&#1081;&#1083;&#1072;.</p>
<p>&#1050;&#1086;&#1087;&#1080;&#1088;&#1091;&#1077;&#1084; &#1089;&#1086;&#1079;&#1076;&#1072;&#1085;&#1085;&#1099;&#1081; &#1092;&#1072;&#1081;&#1083; <span style="color: #009900;">krbldap.mydomain.lan.keytab &#1074; /etc/squid </span>.</p>
<p><strong>3. Kerberos. &#1053;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1072; krb5.conf</strong></p>
<pre><span style="color: #009900;"><span style="color: #000000;">[libdefaults]</span></span>
<span style="color: #009900;"><span style="color: #000000;">        default_realm = MYDOMAIN.LAN</span></span>
<span style="color: #009900;"><span style="color: #000000;">        dns_lookup_realm = true</span></span>
<span style="color: #009900;"><span style="color: #000000;">        dns_lookup_kdc = true</span></span>
<span style="color: #009900;"><span style="color: #000000;">        kdc_timesync = 1</span></span>
<span style="color: #009900;"><span style="color: #000000;">        ccache_type = 4</span></span>
<span style="color: #009900;"><span style="color: #000000;">        forwardable = true</span></span>
<span style="color: #009900;"><span style="color: #000000;">        proxiable = true</span></span>
<span style="color: #009900;"><span style="color: #000000;">[realms]</span></span>
<span style="color: #009900;"><span style="color: #000000;">        MYDOMAIN.LAN = {</span></span>
<span style="color: #009900;"><span style="color: #000000;">                kdc = ad_server.mydomain.lan:88</span></span>
<span style="color: #009900;"><span style="color: #000000;">                admin_server = ad_server.mydomain.lan</span></span>
<span style="color: #009900;"><span style="color: #000000;">                default_domain = mydomain.lan</span></span>
<span style="color: #009900;"><span style="color: #000000;">        }</span></span>
<span style="color: #009900;"><span style="color: #000000;">[domain_realm]</span></span>
<span style="color: #009900;"><span style="color: #000000;">        .mydomain.lan = ad_server.mydomain.lan</span></span>
<span style="color: #009900;"><span style="color: #000000;">        mydomain.lan = ad_server.mydomain.lan</span></span>
</pre>
<p>&#1055;&#1088;&#1086;&#1074;&#1077;&#1088;&#1103;&#1077;&#1084;, &#1089;&#1084;&#1086;&#1078;&#1077;&#1090; &#1083;&#1080; &#1089;&#1082;&#1074;&#1080;&#1076; &#1079;&#1072;&#1088;&#1091;&#1079;&#1080;&#1090;&#1100; &#1089;&#1086;&#1079;&#1076;&#1072;&#1085;&#1085;&#1099;&#1081; &#1090;&#1080;&#1082;&#1077;&#1090;.</p>
<p>!!! NB &#1088;&#1072;&#1079;&#1085;&#1080;&#1094;&#1072; &#1074;&#1086; &#1074;&#1088;&#1077;&#1084;&#1077;&#1085;&#1080; &#1084;&#1077;&#1078;&#1076;&#1091; &#1083;&#1080;&#1085;&#1091;&#1082;&#1089;&#1086;&#1084; &#1080; &#1040;&#1044; &#1076;&#1086;&#1083;&#1078;&#1085;&#1072; &#1073;&#1099;&#1090;&#1100; &#1085;&#1077; &#1073;&#1086;&#1083;&#1100;&#1096;&#1077; 5 &#1084;&#1080;&#1085;&#1091;&#1090;.</p>
<pre><span style="color: #009900;">kinit -V -k -t /etc/squid/krbldap.mydomain.lan.keytab HTTP/vm-ubuntu.mydomain.lan</span>
</pre>
<p>&#1045;&#1089;&#1083;&#1080; &#1074;&#1089;&#1077; &#1091;&#1076;&#1072;&#1095;&#1085;&#1086;, &#1074;&#1099; &#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1077; &#1086;&#1090;&#1074;&#1077;&#1090; "Authenticated to Kerberos v5"</p>
<p>&#1055;&#1088;&#1086;&#1074;&#1077;&#1088;&#1080;&#1090;&#1100; &#1089;&#1087;&#1080;&#1089;&#1086;&#1082; &#1090;&#1080;&#1082;&#1077;&#1090;&#1086;&#1074; &#1074; &#1082;&#1101;&#1096;&#1077; &#1084;&#1086;&#1078;&#1085;&#1086; &#1082;&#1086;&#1084;&#1072;&#1085;&#1076;&#1086;&#1081; <span style="color: #009900;">klist</span>.</p>
<p>&#1053;&#1072; &#1089;&#1072;&#1084; &#1090;&#1080;&#1082;&#1077;&#1090; &#1089;&#1090;&#1072;&#1074;&#1080;&#1084; &#1087;&#1088;&#1072;&#1074;&#1072;</p>
<pre><span style="color: #009900;">chmod 400 /etc/squid/krbldap.mydomain.lan.keytab</span>
<span style="color: #009900;">&#1089;hown nobody /etc/squid/krbldap.mydomain.lan.keytab</span>
</pre>
<p><strong>4. &#1053;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1072; &#1089;&#1082;&#1074;&#1080;&#1076;&#1072;</strong></p>
<p>&#1042; &#1092;&#1072;&#1081;&#1083; <span style="color: #990000;">/etc/init.d/squid</span> &#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1103;&#1077;&#1084; &#1089;&#1090;&#1088;&#1086;&#1082;&#1080;</p>
<pre><span style="color: #000000;"><span style="color: #666666;">KRB5_KTNAME=/etc/squi/krbldap.mydomain.lan.keytab</span></span>
<span style="color: #000000;"><span style="color: #666666;">export KRB5_KTNAME</span></span>
</pre>
<p>&#1044;&#1083;&#1103; &#1090;&#1086;&#1075;&#1086; &#1095;&#1090;&#1086;&#1073;&#1099; &#1072;&#1091;&#1090;&#1077;&#1085;&#1090;&#1080;&#1092;&#1080;&#1094;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103;, &#1074; &#1092;&#1072;&#1081;&#1083; <span style="color: #990000;">squd.conf</span> &#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1103;&#1077;&#1084; &#1089;&#1093;&#1077;&#1084;&#1091; negotiate &#1080; &#1093;&#1077;&#1083;&#1087;&#1077;&#1088; squid_kerb_auth (&#1085;&#1080;&#1082;&#1072;&#1082;&#1086;&#1081; &#1076;&#1088;&#1091;&#1075;&#1086;&#1081; &#1089;&#1093;&#1077;&#1084;&#1099; &#1091; &#1084;&#1077;&#1085;&#1103; &#1085;&#1077; &#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1086;, &#1090;.&#1082;. &#1103; &#1088;&#1072;&#1079;&#1076;&#1072;&#1102; &#1080;&#1085;&#1077;&#1090; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103;&#1084; &#1095;&#1083;&#1077;&#1085;&#1072;&#1084; &#1076;&#1086;&#1084;&#1077;&#1085;&#1072; &#1040;&#1044;. &#1044;&#1083;&#1103; &#1076;&#1088;&#1091;&#1075;&#1080;&#1093; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1077;&#1081; &#1084;&#1086;&#1078;&#1085;&#1086; &#1074;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1100; basic(&#1089;&#1084;. <a href="http://oldie.ronix.net.ua/2006/10/squid-ldap-active-directory.html">&#1089;&#1090;&#1072;&#1090;&#1100;&#1102; </a>Dormestmass'a &#1087;&#1088;&#1086; &#1072;&#1091;&#1090;&#1077;&#1085;&#1090;&#1080;&#1092;&#1080;&#1082;&#1072;&#1094;&#1080;&#1102; &#1095;&#1077;&#1088;&#1077;&#1079; LDAP))</p>
<p><em>(&#1079;&#1076;&#1077;&#1089;&#1100;, &#1080; &#1076;&#1072;&#1083;&#1077;&#1077; &#1074;&#1089;&#1077; &#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103; &#1076;&#1077;&#1083;&#1072;&#1102;&#1090;&#1089;&#1103; &#1074; &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1080;&#1080; &#1089; &#1082;&#1086;&#1085;&#1090;&#1077;&#1082;&#1089;&#1090;&#1085;&#1099;&#1084; &#1093;&#1077;&#1083;&#1087;&#1086;&#1084; squid.conf &#1092;&#1072;&#1081;&#1083;&#1072;, &#1085;&#1077; &#1079;&#1072;&#1073;&#1099;&#1074;&#1072;&#1081;&#1090;&#1077; &#1095;&#1090;&#1086; &#1087;&#1086;&#1088;&#1103;&#1076;&#1086;&#1082; &#1087;&#1086;&#1103;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103; &#1089;&#1090;&#1088;&#1086;&#1082; &#1074; &#1092;&#1072;&#1081;&#1083;&#1077; &#1080;&#1084;&#1077;&#1077;&#1090; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077;)</em></p>
<pre><span style="color: #000000;"><span style="color: #666666;">auth_param negotiate program /usr/lib/squid/squid_kerb_auth -d -s <a class="__cf_email__" href="http://oldie.ronix.net.ua/cdn-cgi/l/email-protection" data-cfemail="e1a9b5b5b1ce978ccc85848388808fcf8c98858e8c80888fcf8d808fa1acb8a5aeaca0a8afcfada0af">[email&nbsp;protected]</a><script data-cfhash="f9e31" type="text/javascript">/* <![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&&(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]> */</script></span></span>
<span style="color: #000000;"><span style="color: #666666;">auth_param negotiate children 5</span></span>
<span style="color: #000000;"><span style="color: #666666;">auth_param negotiate keep_alive on</span></span>
</pre>
<p>&#1054;&#1087;&#1094;&#1080;&#1103; -d (debug) &#1087;&#1086;&#1079;&#1074;&#1086;&#1083;&#1080;&#1090; &#1074; &#1087;&#1088;&#1086;&#1090;&#1086;&#1082;&#1086;&#1083;&#1077; &#1074;&#1080;&#1076;&#1077;&#1090;&#1100; &#1086;&#1096;&#1080;&#1073;&#1082;&#1080; &mdash; &#1087;&#1086;&#1090;&#1086;&#1084; &#1084;&#1086;&#1078;&#1085;&#1086; &#1086;&#1090;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1100;. &#1041;&#1077;&#1079; &#1085;&#1077;&#1077; &#1085;&#1072; &#1101;&#1090;&#1072;&#1087;&#1077; &#1090;&#1077;&#1089;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103; &#1084;&#1086;&#1078;&#1077;&#1090; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086; &#1090;&#1080;&#1093;&#1086; &#1085;&#1077; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1090;&#1100;, &#1085;&#1077; &#1089;&#1086;&#1086;&#1073;&#1097;&#1072;&#1103; &#1076;&#1072;&#1078;&#1077; &#1086;&#1096;&#1080;&#1073;&#1082;&#1080;.</p>
<p>&#1058;&#1077;&#1087;&#1077;&#1088;&#1100; &#1085;&#1091;&#1078;&#1085;&#1086; &#1072;&#1074;&#1090;&#1086;&#1088;&#1080;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1072;&#1091;&#1090;&#1077;&#1085;&#1090;&#1080;&#1092;&#1080;&#1094;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1085;&#1086;&#1075;&#1086; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103;. &#1048; &#1076;&#1077;&#1083;&#1072;&#1077;&#1084; &#1084;&#1099; &#1101;&#1090;&#1086; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; squid_ldap_group.</p>
<p>&#1055;&#1088;&#1080;&#1074;&#1086;&#1078;&#1091; &#1087;&#1088;&#1080;&#1084;&#1077;&#1088; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086; &#1076;&#1083;&#1103; &#1075;&#1088;&#1091;&#1087;&#1087;&#1099; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1077;&#1081;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1084; &#1084;&#1086;&#1078;&#1085;&#1086; &#1093;&#1086;&#1076;&#1080;&#1090;&#1100; &#1074; &#1080;&#1085;&#1090;&#1077;&#1088;&#1085;&#1077;&#1090;. &#1077;&#1089;&#1083;&#1080; &#1085;&#1091;&#1078;&#1085;&#1086; &#1088;&#1072;&#1079;&#1073;&#1080;&#1074;&#1072;&#1090;&#1100; &#1085;&#1072; &#1075;&#1088;&#1091;&#1087;&#1087;&#1099; &#1089; &#1091;&#1088;&#1077;&#1079;&#1072;&#1085;&#1080;&#1077;&#1084; &#1096;&#1080;&#1088;&#1080;&#1085;&#1099; &#1087;&#1088;&#1086;&#1087;&#1091;&#1089;&#1082;&#1072;&#1085;&#1080;&#1103; &mdash; &#1085;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1080; &#1072;&#1085;&#1072;&#1083;&#1086;&#1075;&#1080;&#1095;&#1085;&#1099;&#1077;. &#1053;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1080; &#1075;&#1088;&#1091;&#1087;&#1087; &#1089;&#1084;. &#1086;&#1087;&#1103;&#1090;&#1100; &#1078;&#1077; &#1074; <a href="http://oldie.ronix.net.ua/2006/10/squid-ldap-active-directory.html">&#1089;&#1090;&#1072;&#1090;&#1100;&#1077; </a>Dormestmass'a .</p>
<p>&#1042; &#1087;&#1088;&#1080;&#1084;&#1077;&#1088;&#1077;:<br>
&#1075;&#1088;&#1091;&#1087;&#1087;&#1072; INTERNET_ALLOWED &#1089;&#1086;&#1079;&#1076;&#1072;&#1085;&#1072;  &#1074; OU spb.mydomain.lan &mdash; &#1090;&#1091;&#1076;&#1072; &#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1077;&#1085;&#1099; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1080; &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1084; &#1088;&#1072;&#1079;&#1088;&#1077;&#1096;&#1077;&#1085;&#1086; &#1093;&#1086;&#1076;&#1080;&#1090;&#1100; &#1074; &#1080;&#1085;&#1090;&#1077;&#1088;&#1085;&#1077;&#1090;.(&#1085;&#1072;&#1087;&#1088; any_ad_user)<br>
IP.OF.AD.DC = IP &#1072;&#1076;&#1088;&#1077;&#1089; AD  &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1072; &#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1085;&#1086;&#1075;&#1086; &#1074;<br>
krb5.conf  (&#1093;&#1086;&#1090;&#1103; &#1084;&#1086;&#1078;&#1085;&#1086; &#1087;&#1080;&#1089;&#1072;&#1090;&#1100; &#1080; &#1080;&#1084;&#1103;).</p>
<p>&#1055;&#1088;&#1086;&#1074;&#1077;&#1088;&#1103;&#1077;&#1084; &#1074; sh &#1089;&#1084;&#1086;&#1078;&#1077;&#1090; &#1083;&#1080; &#1089;&#1082;&#1074;&#1080;&#1076; &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1080;&#1090;&#1100; &#1087;&#1088;&#1072;&#1074;&#1072; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103;</p>
<pre>#<span style="color: #009900;">/usr/lib/squid/squid_ldap_group -R -b "dc=mydomain,dc=lan" -f "(&amp;(objectclass=user)(sAMAccountName=%v)(memberof=cn=%a,ou=spb,dc=mydomain,dc=lan))" -D "<a class="__cf_email__" href="http://oldie.ronix.net.ua/cdn-cgi/l/email-protection" data-cfemail="4e253c2c222a2f3e0e23372a21232f272060222f20">[email&nbsp;protected]</a><script data-cfhash="f9e31" type="text/javascript">/* <![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&&(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]> */</script>" -w "</span><span style="color: #009900;">krbldappassword</span><span style="color: #009900;">" -K -d IP.OF.AD.DC</span>
any_ad_user INTERNET_ALLOWED
OK
other_user INTERNET_ALLOWED
ERR
</pre>
<p>&#1045;&#1089;&#1083;&#1080; &#1074;&#1074;&#1086;&#1076;&#1103; &#1076;&#1072;&#1085;&#1085;&#1099;&#1077; &#1074; &#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1077; "ADuser ADgroup" &#1074;&#1099; &#1087;&#1086;&#1083;&#1091;&#1095;&#1072;&#1077;&#1090;&#1077; &#1086;&#1078;&#1080;&#1076;&#1072;&#1077;&#1084;&#1086;&#1077; &mdash; &#1079;&#1085;&#1072;&#1095;&#1080;&#1090; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090;. &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1103;&#1090;&#1100; &#1084;&#1086;&#1078;&#1085;&#1086; &#1080; &#1085;&#1072; &#1083;&#1102;&#1073;&#1099;&#1093; &#1076;&#1088;&#1091;&#1075;&#1080;&#1093; &#1075;&#1088;&#1091;&#1087;&#1087;&#1072;&#1093; &#1040;&#1044;, &#1085;&#1077; &#1086;&#1073;&#1103;&#1079;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1089;&#1074;&#1103;&#1079;&#1072;&#1085;&#1085;&#1099;&#1093; &#1089;&#1086; &#1089;&#1082;&#1074;&#1080;&#1076;&#1086;&#1084;.</p>
<p>&#1045;&#1089;&#1083;&#1080; &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1082;&#1072; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090; , &#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1103;&#1077;&#1084; &#1074; <span style="color: #990000;">squid.conf</span></p>
<pre><span style="color: #000000;"><span style="color: #666666;">external_acl_type ldap_check ttl=1200 %LOGIN /usr/lib/squid/squid_ldap_group -R -b "dc=mydomain,dc=lan" -f "(&amp;(objectclass=user)(sAMAccountName=%v (memberof=cn=%a,ou=spb,dc=mydomain,dc=lan))" -D "<a class="__cf_email__" href="http://oldie.ronix.net.ua/cdn-cgi/l/email-protection" data-cfemail="bbd0c9d9d7dfdacbfbd6c2dfd4d6dad2d595d7dad5">[email&nbsp;protected]</a><script data-cfhash="f9e31" type="text/javascript">/* <![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&&(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]> */</script>" -w "</span></span><span style="color: #666666;">krbldappassword</span><span style="color: #000000;"><span style="color: #666666;">" -K -d IP.OF.AD.DC</span></span>
<span style="color: #000000;"><span style="color: #666666;">acl inet_access external ldap_check INTERNET_ALLOWED</span></span>
<span style="color: #000000;"><span style="color: #666666;">http_access allow inet_access</span></span>
<span style="color: #000000;"><span style="color: #666666;">http_access deny all</span></span>
</pre>
<p><span style="color: #cc6600;">ttl </span>&#1074; &#1076;&#1072;&#1085;&#1085;&#1086;&#1084; &#1089;&#1083;&#1091;&#1095;&#1072;&#1077; &mdash; &#1074;&#1088;&#1077;&#1084;&#1103; &#1074; &#1089;&#1077;&#1082;&#1091;&#1085;&#1076;&#1072;&#1093; &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1082;&#1080; &#1074;&#1099;&#1076;&#1072;&#1085;&#1085;&#1099;&#1093; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103;&#1084; credentials &#1090;.&#1077;. &#1077;&#1089;&#1083;&#1080; &#1074;&#1099; &#1074;&#1099;&#1074;&#1077;&#1076;&#1077;&#1090;&#1077; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103; any_ad_user &#1080;&#1079; AD &#1075;&#1088;&#1091;&#1087;&#1087;&#1099; "INTERNET_ALLOWED" &#1090;&#1086; &#1077;&#1075;&#1086; &#1087;&#1088;&#1072;&#1074;&#1072; &#1085;&#1072; &#1093;&#1086;&#1078;&#1076;&#1077;&#1085;&#1080;&#1077; &#1074; &#1074;&#1077;&#1073; &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1103;&#1090;&#1089;&#1103; &#1074; &#1090;&#1077;&#1095;&#1077;&#1085;&#1080;&#1080; 20 &#1084;&#1080;&#1085;&#1091;&#1090;. &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; ttl=3600s.</p>
<p>&#1061;&#1086;&#1090;&#1103; &#1079;&#1076;&#1077;&#1089;&#1100; &#1086;&#1087;&#1094;&#1080;&#1103; <span style="color: #cc6600;">-d</span> &#1101;&#1090;&#1086; --debug, &#1073;&#1077;&#1079; &#1085;&#1077;&#1077; &#1084;&#1085;&#1077; &#1079;&#1072;&#1087;&#1091;&#1089;&#1090;&#1080;&#1090;&#1100; &#1085;&#1077; &#1091;&#1076;&#1072;&#1083;&#1086;&#1089;&#1100;.</p>
<p>&#1040; &#1074;&#1086;&#1090; &#1089;&#1072;&#1084;&#1072;&#1103; &#1080;&#1085;&#1090;&#1077;&#1088;&#1077;&#1089;&#1085;&#1072;&#1103; &#1079;&#1076;&#1077;&#1089;&#1100; &#1082;&#1072;&#1082; &#1088;&#1072;&#1079; &#1086;&#1087;&#1094;&#1080;&#1103; <span style="color: #cc6600;">-<strong>K</strong></span> &#1082;&#1086;&#1090;&#1086;&#1088;&#1072;&#1103; &#1086;&#1090;&#1074;&#1077;&#1095;&#1072;&#1077;&#1090; &#1079;&#1072; parse username. &#1043;&#1088;&#1091;&#1073;&#1086; &#1075;&#1086;&#1074;&#1086;&#1088;&#1103;, &#1086;&#1085;&#1072; &#1086;&#1090;&#1076;&#1077;&#1083;&#1103;&#1077;&#1090; &#1080;&#1084;&#1103; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103; &#1086;&#1090; @REALM &#1087;&#1086;&#1083;&#1091;&#1095;&#1072;&#1103; &#1085;&#1072; &#1074;&#1093;&#1086;&#1076;&#1077; %LOGIN.</p>
<p>&#1055;&#1077;&#1088;&#1077;&#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1077;&#1084; &#1089;&#1082;&#1074;&#1080;&#1076; &#1080; &#1074;&#1091;&#1072;&#1083;&#1103;!</p>
<p>&#1050;&#1089;&#1090;&#1072;&#1090;&#1080;, &#1087;&#1086; &#1080;&#1089;&#1090;&#1077;&#1095;&#1077;&#1085;&#1080;&#1080; &#1074;&#1088;&#1077;&#1084;&#1077;&#1085;&#1080; keytab, &#1082;&#1086;&#1084;&#1072;&#1085;&#1076;&#1072; <span style="color: #009900;">klist </span>&#1085;&#1080;&#1095;&#1077;&#1075;&#1086; &#1085;&#1077; &#1087;&#1086;&#1082;&#1072;&#1079;&#1099;&#1074;&#1072;&#1077;&#1090;, &#1085;&#1086; &#1074;&#1080;&#1076;&#1085;&#1086; &#1095;&#1090;&#1086; &#1090;&#1080;&#1082;&#1077;&#1090; &#1087;&#1086;&#1083;&#1091;&#1095;&#1072;&#1077;&#1090; renew &#1074; &#1082;&#1101;&#1096;&#1077;</p>
<pre> <span style="color: #666666;">Kerberos 4 ticket cache: /tmp/tkt0</span>
</pre>
<p>&#1042;&#1080;&#1076;&#1080;&#1084;&#1086; &#1076;&#1077;&#1081;&#1089;&#1090;&#1074;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1087;&#1086;&#1089;&#1083;&#1077; &#1079;&#1072;&#1075;&#1088;&#1091;&#1079;&#1082;&#1080; &#1074; &#1082;&#1077;&#1096; &#1077;&#1075;&#1086; &#1084;&#1086;&#1078;&#1085;&#1086; &#1089;&#1088;&#1072;&#1079;&#1091; kdestroy.</p>
<p><strong>5. &#1055;&#1088;&#1086;&#1074;&#1077;&#1088;&#1082;&#1072;. &#1054;&#1089;&#1086;&#1073;&#1077;&#1085;&#1085;&#1086;&#1089;&#1090;&#1080; &#1088;&#1072;&#1073;&#1086;&#1090;&#1099; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1100;&#1089;&#1082;&#1086;&#1075;&#1086; &#1073;&#1088;&#1072;&#1091;&#1079;&#1077;&#1088;&#1072;.</strong></p>
<p>&#1057;&#1088;&#1072;&#1079;&#1091; &#1075;&#1086;&#1074;&#1086;&#1088;&#1102; &#1074; IE &#1074;&#1077;&#1088;&#1089;&#1080;&#1080; &lt; 7 &#1085;&#1077; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090;. &#1069;&#1090;&#1086; &#1089;&#1074;&#1103;&#1079;&#1072;&#1085;&#1085;&#1086; &#1089; &#1086;&#1090;&#1089;&#1091;&#1090;&#1089;&#1090;&#1074;&#1080;&#1077;&#1084; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1082;&#1080; proxy_auth &#1074; &#1073;&#1086;&#1083;&#1077;&#1077; &#1088;&#1072;&#1085;&#1085;&#1080;&#1093; &#1074;&#1077;&#1088;&#1089;&#1080;&#1103;&#1093; IE.</p>
<p>&#1055;&#1086;&#1095;&#1080;&#1090;&#1072;&#1090;&#1100; &#1084;&#1086;&#1078;&#1085;&#1086; &#1079;&#1076;&#1077;&#1089;&#1100; <noindex><noindex><a rel="nofollow" href="http://support.microsoft.com/kb/321728/">http://support.microsoft.com/kb/321728/</a></noindex></noindex>.</p>
<p>&#1059; &#1084;&#1077;&#1085;&#1103; &#1074; &#1089;&#1077;&#1090;&#1080; IE 6.0; &#1074; IE7 &#1074;&#1089;&#1077; &#1089;&#1076;&#1077;&#1083;&#1072;&#1085;&#1085;&#1086;&#1077; &#1085;&#1077; &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1103;&#1083;&#1072; &mdash; &#1090;.&#1082;. &#1091; &#1084;&#1077;&#1085;&#1103; &#1077;&#1077; &#1085;&#1077;&#1090;, &#1080; IE 7 &#1085;&#1077; &#1080;&#1084;&#1077;&#1077;&#1090; &#1076;&#1080;&#1089;&#1090;&#1088;&#1080;&#1073;&#1091;&#1090;&#1080;&#1074;&#1086;&#1074; &#1087;&#1086;&#1076; 2000, &#1076;&#1080;&#1089;&#1090;&#1088;&#1080;&#1073; &#1086;&#1090; &#1061;&#1055; &mdash; &#1085;&#1077; &#1089;&#1090;&#1072;&#1074;&#1080;&#1090;&#1089;&#1103;, &#1077;&#1084;&#1091; &#1085;&#1077; &#1093;&#1074;&#1072;&#1090;&#1072;&#1077;&#1090; cryptography service &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1074; &#1074;&#1080;&#1085;2000 &#1086;&#1090;&#1089;&#1091;&#1090;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090;. &#1085;&#1080;&#1082;&#1072;&#1082;&#1080;&#1077; &#1084;&#1072;&#1093;&#1080;&#1085;&#1072;&#1094;&#1080;&#1080; (&#1087;&#1086;&#1083; &#1076;&#1085;&#1103;) &#1085;&#1077; &#1087;&#1086;&#1084;&#1086;&#1075;&#1083;&#1080;.</p>
<p>&#1054;&#1087;&#1077;&#1088;&#1091; &#1090;&#1086;&#1078;&#1077; &#1085;&#1077; &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1103;&#1083;&#1072;.</p>
<p>(&#1045;&#1089;&#1083;&#1080; &#1087;&#1088;&#1086;&#1090;&#1077;&#1089;&#1090;&#1080;&#1088;&#1091;&#1077;&#1090;&#1077; &mdash; &#1085;&#1077; &#1087;&#1086;&#1083;&#1077;&#1085;&#1080;&#1090;&#1077;&#1089;&#1100; &mdash; &#1086;&#1090;&#1087;&#1080;&#1096;&#1080;&#1090;&#1077; &#1088;&#1077;&#1079;&#1091;&#1083;&#1100;&#1090;&#1072;&#1090;&#1099; &#1074; &#1082;&#1086;&#1084;&#1084;&#1077;&#1085;&#1090;&#1072;&#1088;&#1080;&#1080;).</p>
<p>&#1042; &#1060;&#1060; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090; &#1073;&#1077;&#1079; &#1087;&#1088;&#1086;&#1073;&#1083;&#1077;&#1084;. (&#1090;&#1077;&#1089;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1083;&#1086;&#1089;&#1100; &#1085;&#1072; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080; 3.0.0.)</p>
<p>&#1042; &#1084;&#1086;&#1077;&#1084; &#1089;&#1083;&#1091;&#1095;&#1072;&#1077; &#1087;&#1088;&#1080;&#1096;&#1083;&#1086;&#1089;&#1100; &#1087;&#1086;&#1089;&#1090;&#1091;&#1087;&#1080;&#1090;&#1100; &#1090;&#1072;&#1082;:<br>
&#1090;.&#1082;. &#1087;&#1072;&#1088;&#1072; &#1089;&#1077;&#1088;&#1074;&#1080;&#1089;&#1086;&#1074;, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1084;&#1099;&#1093; &#1074; &#1088;&#1072;&#1073;&#1086;&#1090;&#1077; &#1089;&#1086;&#1090;&#1088;&#1091;&#1076;&#1085;&#1080;&#1082;&#1086;&#1074; &#1090;&#1088;&#1077;&#1073;&#1091;&#1102;&#1090; &#1088;&#1072;&#1073;&#1086;&#1090;&#1099; ActiveX &#1089; &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1082;&#1086;&#1081; CA, &#1095;&#1090;&#1086; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1074; IE, &#1090;&#1086; &#1103; &#1095;&#1077;&#1088;&#1077;&#1079; iptables &#1086;&#1090;&#1082;&#1088;&#1099;&#1083;&#1072; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082; &#1101;&#1090;&#1086;&#1084;&#1091; &#1089;&#1072;&#1081;&#1090;&#1091; &#1085;&#1072; &#1087;&#1086;&#1088;&#1090;&#1099; 80, 443 &#1084;&#1080;&#1084;&#1086; &#1089;&#1082;&#1074;&#1080;&#1076;&#1072;. (&#1086;&#1089;&#1090;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1086;&#1073;&#1088;&#1072;&#1097;&#1077;&#1085;&#1080;&#1103; &#1085;&#1072; 80,443 &#1085;&#1072;&#1087;&#1088;&#1103;&#1084;&#1091;&#1102; &mdash; &#1079;&#1072;&#1082;&#1088;&#1099;&#1090;&#1100;).</p>
<p>&#1042; Group Policy &#1085;&#1072; AD &#1074;&#1099;&#1089;&#1090;&#1072;&#1074;&#1080;&#1083;&#1072; &#1074;&#1089;&#1077;&#1084; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103;&#1084; No proxy &#1074; &#1085;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1072;&#1093; IE.</p>
<p>&#1055;&#1086;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1091; &#1072;&#1074;&#1090;&#1086;&#1088;&#1080;&#1079;&#1091;&#1102;&#1097;&#1080;&#1081; &#1089;&#1082;&#1074;&#1080;&#1076; &#1085;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100; &#1073;&#1099;&#1090;&#1100; transparent, &#1090;&#1086; &#1074;&#1089;&#1077;&#1084; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103;&#1084; &#1074; FF &#1042;&#1099;&#1089;&#1090;&#1072;&#1074;&#1083;&#1077;&#1085; &#1087;&#1088;&#1086;&#1082;&#1089;&#1080; &#1088;&#1091;&#1082;&#1072;&#1084;&#1080;. (&#1085;&#1072;&#1074;&#1077;&#1088;&#1085;&#1086; &#1084;&#1086;&#1081; &#1089;&#1083;&#1077;&#1076;&#1091;&#1102;&#1097;&#1080;&#1081; &#1080;&#1089;&#1089;&#1083;&#1077;&#1076;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1100;&#1089;&#1082;&#1080;&#1081; &#1096;&#1072;&#1075; &mdash; &#1101;&#1090;&#1086; WPAD)</p>
<p>&#1058;.&#1086;. &#1084;&#1080;&#1084;&#1086; &#1089;&#1082;&#1074;&#1080;&#1076;&#1072; &#1073;&#1091;&#1076;&#1077;&#1090; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1090;&#1100; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1101;&#1090;&#1086;&#1090; &#1089;&#1072;&#1081;&#1090; &#1095;&#1077;&#1088;&#1077;&#1079; IE (&#1074;&#1085;&#1077; &#1079;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1086;&#1090; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080;). &#1042;&#1089;&#1077; &#1086;&#1089;&#1090;&#1072;&#1083;&#1100;&#1085;&#1086;&#1077; &#1079;&#1072;&#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1074; &#1060;&#1060;.</p>
<p>&#1041;&#1086;&#1083;&#1077;&#1077; &#1090;&#1086;&#1075;&#1086;, &#1095;&#1090;&#1086;&#1073;&#1099; &#1091; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1077;&#1081; &#1073;&#1099;&#1083;&#1072; &#1087;&#1086;&#1083;&#1085;&#1072;&#1103; &#1080;&#1083;&#1083;&#1102;&#1079;&#1080;&#1103; &#1088;&#1072;&#1073;&#1086;&#1090;&#1099; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1074; FireFox &#1090;&#1091;&#1076;&#1072; &#1087;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1077;&#1085; IE Tab add-on, &#1089; &#1079;&#1072;&#1085;&#1077;&#1089;&#1077;&#1085;&#1080;&#1077;&#1084; &#1074; &#1092;&#1080;&#1083;&#1100;&#1090;&#1088; &#1072;&#1076;&#1088;&#1077;&#1089;&#1072; &#1090;&#1086;&#1075;&#1086; &#1089;&#1072;&#1084;&#1086;&#1075;&#1086; &#1089;&#1072;&#1081;&#1090;&#1072;. &#1048; &#1085;&#1072;&#1073;&#1080;&#1088;&#1072;&#1103; &#1074; &#1060;&#1060; &#1072;&#1076;&#1088;&#1077;&#1089;&#1085;&#1086;&#1081; &#1089;&#1090;&#1088;&#1086;&#1082;&#1077; &#1072;&#1076;&#1088;&#1077;&#1089; &#1080;&#1083;&#1080; &#1086;&#1090;&#1082;&#1088;&#1099;&#1074;&#1072;&#1103; &#1080;&#1079; bookmarks &mdash; &#1060;&#1060; &#1072;&#1074;&#1090;&#1086;&#1084;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080; &#1086;&#1090;&#1082;&#1088;&#1099;&#1074;&#1072;&#1077;&#1090; iexplore.exe &#1074;&#1085;&#1091;&#1090;&#1088;&#1080; &#1089;&#1074;&#1086;&#1077;&#1075;&#1086; &#1090;&#1072;&#1073;&#1072;.</p>
<p><strong>6. debian. "&#1087;&#1086;&#1082;&#1072; &#1085;&#1077; &#1087;&#1088;&#1080;&#1096;&#1077;&#1083; Lenny"</strong></p>
<p>&#1055;&#1088;&#1086;&#1073;&#1083;&#1077;&#1084;&#1072; &#1076;&#1077;&#1073;&#1080;&#1072;&#1085;&#1072; &#1074; &#1090;&#1086;&#1084;, &#1095;&#1090;&#1086; &#1074;&#1089;&#1077; &#1087;&#1072;&#1082;&#1077;&#1090;&#1099;, &#1079;&#1072;&#1090;&#1088;&#1072;&#1075;&#1080;&#1074;&#1072;&#1077;&#1084;&#1099;&#1077; &#1076;&#1072;&#1085;&#1085;&#1086;&#1081; &#1089;&#1093;&#1077;&#1084;&#1086;&#1081; &#1088;&#1072;&#1073;&#1086;&#1090;&#1099; &#1091; &#1085;&#1077;&#1075;&#1086; &#1089;&#1090;&#1072;&#1088;&#1086;&#1074;&#1072;&#1090;&#1099;. &#1042; &#1095;&#1072;&#1089;&#1090;&#1085;&#1086;&#1089;&#1090;&#1080;, &#1076;&#1072;&#1078;&#1077; &#1089;&#1086;&#1073;&#1088;&#1072;&#1085;&#1085;&#1099;&#1081; &#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1084; &#1089;&#1082;&#1074;&#1080;&#1076; &#1085;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1090;&#1100; &#1086;&#1090;&#1074;&#1077;&#1090; &#1040;&#1044; &#1085;&#1072; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089; &#1086;&#1073; &#1072;&#1091;&#1090;&#1077;&#1085;&#1090;&#1080;&#1092;&#1080;&#1082;&#1072;&#1094;&#1080;&#1080;, &#1087;&#1086;&#1090;&#1086;&#1084;&#1091; &#1095;&#1090;&#1086; krb5 &#1077;&#1075;&#1086; &#1074;&#1099;&#1076;&#1072;&#1077;&#1090; &#1085;&#1077;&#1087;&#1088;&#1072;&#1074;&#1080;&#1083;&#1100;&#1085;&#1086;(&#1089;&#1090;&#1072;&#1088;&#1086;&#1074;&#1072;&#1090; &mdash; &#1096;&#1077;&#1087;&#1077;&#1083;&#1103;&#1074;&#1080;&#1090; :)).</p>
<p>&#1048; &#1090;&#1077;&#1084;, &#1082;&#1090;&#1086; &#1085;&#1077; &#1073;&#1086;&#1080;&#1090;&#1089;&#1103; &#1073;&#1088;&#1072;&#1090;&#1100; &#1087;&#1072;&#1082;&#1077;&#1090;&#1099; testing- &#1084;&#1086;&#1078;&#1085;&#1086; &#1076;&#1077;&#1083;&#1072;&#1090;&#1100; &#1089;&#1083;&#1077;&#1076;&#1091;&#1102;&#1097;&#1077;&#1077;...</p>
<p>&#1042; <span style="color: #990000;">/etc/apt/source.list</span> &#1087;&#1088;&#1086;&#1087;&#1080;&#1089;&#1072;&#1090;&#1100; &#1074;&#1079;&#1103;&#1090;&#1080;&#1077; &#1082;&#1072;&#1082; stable &#1090;&#1072;&#1082; &#1080; testing.</p>
<p>&#1057;&#1076;&#1077;&#1083;&#1072;&#1090;&#1100; apt-update</p>
<p>&#1052;&#1086;&#1081; apt, &#1073;&#1091;&#1076;&#1091;&#1095;&#1080; &#1085;&#1077; &#1074; &#1089;&#1080;&#1083;&#1072;&#1093; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1090;&#1100; &#1090;&#1072;&#1082;&#1086;&#1081; &#1086;&#1075;&#1088;&#1086;&#1084;&#1085;&#1099;&#1081; &#1089;&#1087;&#1080;&#1089;&#1086;&#1082; &#1087;&#1072;&#1082;&#1077;&#1090;&#1086;&#1074; &#1074;&#1099;&#1087;&#1072;&#1076;&#1072;&#1083; &#1089; &#1086;&#1096;&#1080;&#1073;&#1082;&#1086;&#1081;.</p>
<pre>E: Dynamic MMap ran out of room
</pre>
<p>&#1044;&#1083;&#1103; &#1088;&#1077;&#1096;&#1077;&#1085;&#1080;&#1103; &#1087;&#1088;&#1086;&#1073;&#1083;&#1077;&#1084;&#1099;, &#1094;&#1080;&#1090;&#1080;&#1088;&#1091;&#1102;</p>
<pre>Put this in /etc/apt/apt.conf and the problem goes away, at least it did for me today:
APT::Cache-Limit 12582912;
</pre>
<p>&#1048; &#1087;&#1086;&#1089;&#1083;&#1077; &#1072;&#1087;&#1076;&#1077;&#1081;&#1090;&#1072; &#1086;&#1073;&#1085;&#1086;&#1074;&#1083;&#1103;&#1081;&#1090;&#1077; &#1087;&#1072;&#1082;&#1077;&#1090;</p>
<pre><span style="color: #009900;">apt-get -t testing install krb5-user</span>
</pre>
<p>&#1054;&#1085; &#1087;&#1086;&#1090;&#1103;&#1085;&#1077;&#1090; &#1079;&#1072; &#1089;&#1086;&#1073;&#1086;&#1081; &#1082;&#1091;&#1095;&#1091; libc &#1080; &#1087;&#1088;&#1086;&#1095;&#1080;&#1093;. &#1053;&#1086; &#1087;&#1086;&#1089;&#1083;&#1077; &#1101;&#1090;&#1086;&#1075;&#1086; &mdash; &#1074;&#1089;&#1077; &#1079;&#1072;&#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090;.</p>
<p><em>rem: &#1076;&#1083;&#1103; Etch &#1089;&#1086;&#1073;&#1080;&#1088;&#1072;&#1090;&#1100; &#1089;&#1082;&#1074;&#1080;&#1076; &#1087;&#1088;&#1080;&#1096;&#1083;&#1086;&#1089;&#1100; &#1085;&#1077; &#1095;&#1077;&#1088;&#1077;&#1079; dpkg-buildpackage, &#1072; &#1095;&#1077;&#1088;&#1077;&#1079; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082; debian/rules (build  binary)</em></p>
<p>&#1046;&#1077;&#1083;&#1072;&#1102; &#1074;&#1089;&#1077;&#1084; &#1091;&#1089;&#1087;&#1077;&#1093;&#1086;&#1074; &#1074;&#1086; &#1074;&#1085;&#1077;&#1076;&#1088;&#1077;&#1085;&#1080;&#1080; &#1088;&#1077;&#1096;&#1077;&#1085;&#1080;&#1103;.</p>
<p>&#1057;&#1087;&#1072;&#1089;&#1080;&#1073;&#1086; &#1056;&#1086;&#1084;&#1072;&#1085;&#1091; &#1064;&#1088;&#1072;&#1084;&#1082;&#1086; (Dormestmass) &#1079;&#1072; &#1087;&#1088;&#1077;&#1076;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1077;&#1085;&#1085;&#1086;&#1077; &#1084;&#1077;&#1089;&#1090;&#1086; &#1076;&#1083;&#1103; &#1088;&#1072;&#1079;&#1084;&#1077;&#1097;&#1077;&#1085;&#1080;&#1103; &#1101;&#1090;&#1086;&#1075;&#1086; howto &#1080; <noindex><noindex><a rel="nofollow" href="http://code.google.com/p/pypodder/">&#1057;&#1090;&#1072;&#1085;&#1080;&#1089;&#1083;&#1072;&#1074;&#1091; &#1042;.</a></noindex></noindex> &#1079;&#1072; &#1074;&#1089;&#1103;&#1082;&#1086;&#1075;&#1086; &#1088;&#1086;&#1076;&#1072; &#1087;&#1086;&#1076;&#1089;&#1082;&#1072;&#1079;&#1082;&#1080;.</p>
<p><noindex><a href="http://oldie.ronix.net.ua/cdn-cgi/l/email-protection#81e0efefe0aff2eaeef3eeeae9eee5eef7e0c1e6ece0e8edafe2eeec"><span class="__cf_email__" data-cfemail="72131c1c135c01191d001d191a1d161d041332151f131b1e5c111d1f">[email&nbsp;protected]</span><script data-cfhash="f9e31" type="text/javascript">/* <![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&&(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]> */</script></a></noindex></p>
<hr></div><!-- .entry-content -->
<footer class="entry-footer"><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="http://oldie.ronix.net.ua/2008/08/squidkerberos-c-ldap-active-directory.html" rel="bookmark"><time class="entry-date published updated" datetime="2008-08-15T14:18:52+00:00">August 15, 2008</time></a></span><span class="byline"><span class="author vcard"><span class="screen-reader-text">Author </span><a class="url fn n" href="http://oldie.ronix.net.ua/author/ronix">ronix</a></span></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="http://oldie.ronix.net.ua/category/uncategorized" rel="category tag">Uncategorized</a></span>			</footer><!-- .entry-footer --></article><!-- #post-## --><nav class="navigation post-navigation" role="navigation"><h2 class="screen-reader-text">Post navigation</h2>
<div class="nav-links"><div class="nav-previous"><a href="http://oldie.ronix.net.ua/2008/04/virtualnye-polzovateli-vsftpd.html" rel="prev"><span class="meta-nav" aria-hidden="true">Previous</span> <span class="screen-reader-text">Previous post:</span> <span class="post-title">&#1042;&#1080;&#1088;&#1090;&#1091;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1080; vsftpd</span></a></div><div class="nav-next"><a href="http://oldie.ronix.net.ua/2008/09/fb2-linux.html" rel="next"><span class="meta-nav" aria-hidden="true">Next</span> <span class="screen-reader-text">Next post:</span> <span class="post-title">&#1063;&#1080;&#1090;&#1072;&#1083;&#1082;&#1072; fb2 &#1076;&#1083;&#1103; linux</span></a></div></div>
</nav></main><!-- .site-main --></div><!-- .content-area -->

</div><!-- .site-content -->
<footer id="colophon" class="site-footer" role="contentinfo"><div class="site-info">
<a href="https://wordpress.org/">Proudly powered by WordPress</a>
</div><!-- .site-info -->
</footer><!-- .site-footer --></div><!-- .site -->
<script type="text/javascript" src="http://oldie.ronix.net.ua/wp-content/themes/twentyfifteen/js/skip-link-focus-fix.js?ver=20141010"></script><script type="text/javascript">
/* <![CDATA[ */
var screenReaderText = {"expand":"<span class=\"screen-reader-text\">expand child menu<\/span>","collapse":"<span class=\"screen-reader-text\">collapse child menu<\/span>"};
/* ]]> */
</script><script type="text/javascript" src="http://oldie.ronix.net.ua/wp-content/themes/twentyfifteen/js/functions.js?ver=20150330"></script><script type="text/javascript">/* <![CDATA[ */(function(d,s,a,i,j,r,l,m,t){try{l=d.getElementsByTagName('a');t=d.createElement('textarea');for(i=0;l.length-i;i++){try{a=l[i].href;s=a.indexOf('/cdn-cgi/l/email-protection');m=a.length;if(a&&s>-1&&m>28){j=28+s;s='';if(j<m){r='0x'+a.substr(j,2)|0;for(j+=2;j<m&&a.charAt(j)!='X';j+=2)s+='%'+('0'+('0x'+a.substr(j,2)^r).toString(16)).slice(-2);j++;s=decodeURIComponent(s)+a.substr(j,m-j)}t.innerHTML=s.replace(/,'&lt;').replace(/>/g,'&gt;');l[i].href='mailto:'+t.value}}catch(e){}}}catch(e){}})(document);/* ]]> */</script></body></html><!-- WP Fastest Cache file was created in 0.20740294456482 seconds, on 21-08-15 7:53:26 Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.155 Safari/537.36-->
